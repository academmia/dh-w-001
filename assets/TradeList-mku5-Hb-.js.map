{"version":3,"file":"TradeList-mku5-Hb-.js","sources":["../../src/components/ftbot/ForceExitForm.vue","../../src/components/ftbot/TradeActionsPopover.vue","../../src/components/ftbot/TradeList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-modal\r\n      id=\"forceexit-modal\"\r\n      v-model=\"model\"\r\n      title=\"Force exiting a trade\"\r\n      @show=\"resetForm\"\r\n      @hidden=\"resetForm\"\r\n      @ok=\"handleEntry\"\r\n    >\r\n      <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\r\n        <p>\r\n          <span>Exiting Trade #{{ trade.trade_id }} {{ trade.pair }}.</span>\r\n          <br />\r\n          <span>Currently owning {{ trade.amount }} {{ trade.base_currency }}</span>\r\n        </p>\r\n        <b-form-group\r\n          :label=\"`*Amount in ${trade.base_currency} [optional]`\"\r\n          label-for=\"stake-input\"\r\n          invalid-feedback=\"Amount must be empty or a positive number\"\r\n          :state=\"amount !== undefined && amount > 0\"\r\n        >\r\n          <b-form-input\r\n            id=\"stake-input\"\r\n            v-model=\"amount\"\r\n            type=\"number\"\r\n            step=\"0.000001\"\r\n          ></b-form-input>\r\n          <b-form-input\r\n            id=\"stake-input\"\r\n            v-model=\"amount\"\r\n            type=\"range\"\r\n            step=\"0.000001\"\r\n            min=\"0\"\r\n            :max=\"trade.amount\"\r\n          ></b-form-input>\r\n        </b-form-group>\r\n\r\n        <b-form-group\r\n          label=\"*OrderType\"\r\n          label-for=\"ordertype-input\"\r\n          invalid-feedback=\"OrderType\"\r\n          :state=\"ordertype !== undefined\"\r\n        >\r\n          <b-form-select\r\n            v-model=\"ordertype\"\r\n            class=\"ms-2\"\r\n            :options=\"['market', 'limit']\"\r\n            style=\"min-width: 7em\"\r\n            size=\"sm\"\r\n          >\r\n          </b-form-select>\r\n        </b-form-group>\r\n      </form>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { useBotStore } from '@/stores/ftbotwrapper';\r\nimport { ForceSellPayload, Trade } from '@/types';\r\n\r\nconst props = defineProps({\r\n  trade: {\r\n    type: Object as () => Trade,\r\n    required: true,\r\n  },\r\n  modelValue: { required: true, default: false, type: Boolean },\r\n});\r\nconst emit = defineEmits(['update:modelValue']);\r\nconst botStore = useBotStore();\r\n\r\nconst form = ref<HTMLFormElement>();\r\nconst amount = ref<number | undefined>(undefined);\r\nconst ordertype = ref('limit');\r\n\r\nconst checkFormValidity = () => {\r\n  const valid = form.value?.checkValidity();\r\n\r\n  return valid;\r\n};\r\n\r\nconst model = computed({\r\n  get() {\r\n    return props.modelValue;\r\n  },\r\n  set(value: boolean) {\r\n    emit('update:modelValue', value);\r\n  },\r\n});\r\n\r\nfunction handleSubmit() {\r\n  // Exit when the form isn't valid\r\n  if (!checkFormValidity()) {\r\n    return;\r\n  }\r\n  // call forceentry\r\n  const payload: ForceSellPayload = { tradeid: String(props.trade.trade_id) };\r\n\r\n  if (ordertype.value) {\r\n    payload.ordertype = ordertype.value;\r\n  }\r\n  if (amount.value) {\r\n    payload.amount = amount.value;\r\n  }\r\n  botStore.activeBot.forceexit(payload);\r\n  model.value = false;\r\n}\r\n\r\nfunction resetForm() {\r\n  amount.value = props.trade.amount;\r\n  ordertype.value =\r\n    botStore.activeBot.botState?.order_types?.force_exit ||\r\n    botStore.activeBot.botState?.order_types?.exit ||\r\n    'limit';\r\n}\r\n\r\nfunction handleEntry() {\r\n  // Trigger submit handler\r\n  handleSubmit();\r\n}\r\n</script>\r\n","<script setup lang=\"ts\">\r\nimport { Trade } from '@/types';\r\n\r\nimport TradeActions from './TradeActions.vue';\r\n\r\ndefineProps({\r\n  trade: { type: Object as () => Trade, required: true },\r\n  id: { type: Number, required: true },\r\n  botApiVersion: { type: Number, required: true },\r\n});\r\nconst emit = defineEmits([\r\n  'forceExit',\r\n  'forceExitPartial',\r\n  'cancelOpenOrder',\r\n  'reloadTrade',\r\n  'deleteTrade',\r\n]);\r\nconst popoverOpen = ref(false);\r\n\r\nfunction forceExitHandler(item: Trade, ordertype: string | undefined = undefined) {\r\n  popoverOpen.value = false;\r\n  emit('forceExit', item, ordertype);\r\n}\r\nfunction forceExitPartialHandler(item: Trade) {\r\n  popoverOpen.value = false;\r\n  emit('forceExitPartial', item);\r\n}\r\nfunction cancelOpenOrderHandler(item: Trade) {\r\n  popoverOpen.value = false;\r\n  emit('cancelOpenOrder', item);\r\n}\r\nfunction handleReloadTrade(item: Trade) {\r\n  popoverOpen.value = false;\r\n  emit('reloadTrade', item);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <b-button\r\n      :id=\"`btn-actions-${id}`\"\r\n      class=\"btn-xs\"\r\n      size=\"sm\"\r\n      title=\"Actions\"\r\n      @click=\"popoverOpen = !popoverOpen\"\r\n    >\r\n      <i-mdi-gesture-tap />\r\n    </b-button>\r\n    <b-popover\r\n      container=\"body\"\r\n      :target=\"`btn-actions-${id}`\"\r\n      :title=\"`Actions for ${trade.pair}`\"\r\n      triggers=\"manual\"\r\n      :show=\"popoverOpen\"\r\n      placement=\"left\"\r\n    >\r\n      <trade-actions\r\n        :trade=\"trade\"\r\n        :bot-api-version=\"botApiVersion\"\r\n        @force-exit=\"forceExitHandler\"\r\n        @force-exit-partial=\"forceExitPartialHandler\"\r\n        @delete-trade=\"\r\n          popoverOpen = false;\r\n          $emit('deleteTrade', trade);\r\n        \"\r\n        @cancel-open-order=\"cancelOpenOrderHandler\"\r\n        @reload-trade=\"handleReloadTrade\"\r\n      />\r\n      <b-button class=\"mt-1 w-100 text-start\" size=\"sm\" @click=\"popoverOpen = false\">\r\n        <i-mdi-cancel class=\"me-1\" />Close Actions menu\r\n      </b-button>\r\n    </b-popover>\r\n  </div>\r\n</template>\r\n\r\n<style scoped></style>\r\n","<template>\r\n  <div class=\"h-100 overflow-auto w-100\">\r\n    <b-table\r\n      ref=\"tradesTable\"\r\n      small\r\n      hover\r\n      stacked=\"md\"\r\n      :items=\"\r\n        trades.filter(\r\n          (t) =>\r\n            t.pair.toLowerCase().includes(filterText.toLowerCase()) ||\r\n            t.exit_reason?.toLowerCase().includes(filterText.toLowerCase()) ||\r\n            t.enter_tag?.toLowerCase().includes(filterText.toLowerCase()),\r\n        ) as unknown as TableItem[]\r\n      \"\r\n      :fields=\"tableFields\"\r\n      show-empty\r\n      :empty-text=\"emptyText\"\r\n      :per-page=\"perPage\"\r\n      :current-page=\"currentPage\"\r\n      primary-key=\"botTradeId\"\r\n      selectable\r\n      :select-head=\"false\"\r\n      select-mode=\"single\"\r\n      @row-contextmenu=\"handleContextMenuEvent\"\r\n      @row-clicked=\"onRowClicked\"\r\n      @row-selected=\"onRowSelected\"\r\n    >\r\n      <template #cell(actions)=\"{ index, item }\">\r\n        <TradeActionsPopover\r\n          :id=\"index\"\r\n          :trade=\"item as unknown as Trade\"\r\n          :bot-api-version=\"botStore.activeBot.botApiVersion\"\r\n          @delete-trade=\"removeTradeHandler(item as unknown as Trade)\"\r\n          @force-exit=\"forceExitHandler\"\r\n          @force-exit-partial=\"forceExitPartialHandler\"\r\n          @cancel-open-order=\"cancelOpenOrderHandler\"\r\n          @reload-trade=\"reloadTradeHandler\"\r\n        />\r\n      </template>\r\n      <template #cell(pair)=\"row\">\r\n        <span>\r\n          {{ `${row.item.pair}${row.item.open_order_id || row.item.has_open_orders ? '*' : ''}` }}\r\n        </span>\r\n      </template>\r\n      <template #cell(trade_id)=\"row\">\r\n        {{ row.item.trade_id }}\r\n        {{\r\n          botStore.activeBot.botApiVersion > 2.0 && row.item.trading_mode !== 'spot'\r\n            ? '| ' + (row.item.is_short ? 'Short' : 'Long')\r\n            : ''\r\n        }}\r\n      </template>\r\n      <template #cell(stake_amount)=\"row\">\r\n        {{ formatPriceWithDecimals(row.item.stake_amount) }}\r\n        {{ row.item.trading_mode !== 'spot' ? `(${row.item.leverage}x)` : '' }}\r\n      </template>\r\n      <template #cell(profit)=\"row\">\r\n        <trade-profit :trade=\"row.item as unknown as Trade\" />\r\n      </template>\r\n      <template #cell(open_timestamp)=\"row\">\r\n        <DateTimeTZ :date=\"(row.item as unknown as Trade).open_timestamp\" />\r\n      </template>\r\n      <template #cell(close_timestamp)=\"row\">\r\n        <DateTimeTZ :date=\"(row.item as unknown as Trade).close_timestamp ?? 0\" />\r\n      </template>\r\n    </b-table>\r\n    <div class=\"w-100 d-flex justify-content-between\">\r\n      <b-pagination\r\n        v-if=\"!activeTrades\"\r\n        v-model=\"currentPage\"\r\n        :total-rows=\"rows\"\r\n        :per-page=\"perPage\"\r\n        aria-controls=\"my-table\"\r\n      ></b-pagination>\r\n      <b-form-group v-if=\"showFilter\" label-for=\"trade-filter\">\r\n        <b-form-input id=\"trade-filter\" v-model=\"filterText\" type=\"text\" placeholder=\"Filter\" />\r\n      </b-form-group>\r\n    </div>\r\n    <force-exit-form v-if=\"activeTrades\" v-model=\"forceExitVisible\" :trade=\"feTrade\" />\r\n    <b-modal v-model=\"removeTradeVisible\" title=\"Exit trade\" @ok=\"forceExitExecuter\">\r\n      {{ confirmExitText }}\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { formatPercent, formatPrice } from '@/shared/formatters';\r\nimport { MultiDeletePayload, MultiForcesellPayload, Trade } from '@/types';\r\n\r\nimport { useBotStore } from '@/stores/ftbotwrapper';\r\nimport { useRouter } from 'vue-router';\r\nimport { TableField, TableItem } from 'bootstrap-vue-next';\r\n\r\nenum ModalReasons {\r\n  removeTrade,\r\n  forceExit,\r\n  forceExitPartial,\r\n  cancelOpenOrder,\r\n}\r\n\r\nconst props = defineProps({\r\n  trades: { required: true, type: Array as () => Array<Trade> },\r\n  title: { default: 'Trades', type: String },\r\n  stakeCurrency: { required: false, default: '', type: String },\r\n  activeTrades: { default: false, type: Boolean },\r\n  showFilter: { default: false, type: Boolean },\r\n  multiBotView: { default: false, type: Boolean },\r\n  emptyText: { default: 'No Trades to show.', type: String },\r\n});\r\nconst botStore = useBotStore();\r\nconst router = useRouter();\r\nconst settingsStore = useSettingsStore();\r\nconst currentPage = ref(1);\r\nconst selectedItemIndex = ref();\r\nconst filterText = ref('');\r\nconst feTrade = ref<Trade>({} as Trade);\r\nconst perPage = props.activeTrades ? 200 : 15;\r\nconst tradesTable = ref<HTMLFormElement>();\r\nconst forceExitVisible = ref(false);\r\nconst removeTradeVisible = ref(false);\r\nconst confirmExitText = ref('');\r\nconst confirmExitValue = ref<ModalReasons | null>(null);\r\n\r\nconst openFields: TableField[] = [{ key: 'actions' }];\r\nconst closedFields: TableField[] = [\r\n  { key: 'close_timestamp', label: 'Close date' },\r\n  { key: 'exit_reason', label: 'Close Reason' },\r\n];\r\nfunction formatPriceWithDecimals(price) {\r\n  return formatPrice(price, botStore.activeBot.stakeCurrencyDecimals);\r\n}\r\nconst rows = computed(() => {\r\n  return props.trades.length;\r\n});\r\n\r\n// This using \"TableField[]\" below causes\r\n// Error: Debug Failure. No error for last overload signature\r\nconst tableFields = ref<any[]>([]);\r\n\r\nonMounted(() => {\r\n  tableFields.value = [\r\n    { key: 'trade_id', label: 'ID' },\r\n    { key: 'pair', label: 'Pair' },\r\n    { key: 'amount', label: 'Amount' },\r\n    {\r\n      key: 'stake_amount',\r\n      label: 'Stake amount',\r\n    },\r\n    {\r\n      key: 'open_rate',\r\n      label: 'Open rate',\r\n      formatter: (value: unknown) => formatPrice(value as number),\r\n    },\r\n    {\r\n      key: props.activeTrades ? 'current_rate' : 'close_rate',\r\n      label: props.activeTrades ? 'Current rate' : 'Close rate',\r\n      formatter: (value: unknown) => formatPrice(value as number),\r\n    },\r\n    {\r\n      key: 'profit',\r\n      label: props.activeTrades ? 'Current profit %' : 'Profit %',\r\n      formatter: (value: unknown, key?: string, item?: unknown) => {\r\n        if (!item) {\r\n          return '';\r\n        }\r\n        const typedItem = item as Trade;\r\n        const percent = formatPercent(typedItem.profit_ratio, 2);\r\n        return `${percent} ${`(${formatPriceWithDecimals(typedItem.profit_abs)})`}`;\r\n      },\r\n    },\r\n    { key: 'open_timestamp', label: 'Open date' },\r\n    ...(props.activeTrades ? openFields : closedFields),\r\n  ];\r\n  if (props.multiBotView) {\r\n    tableFields.value.unshift({ key: 'botName', label: 'Bot' });\r\n  }\r\n});\r\n\r\nconst feOrderType = ref<string | undefined>(undefined);\r\nfunction forceExitHandler(item: Trade, ordertype: string | undefined = undefined) {\r\n  feTrade.value = item;\r\n  confirmExitValue.value = ModalReasons.forceExit;\r\n  confirmExitText.value = `Really exit trade ${item.trade_id} (Pair ${item.pair}) using ${ordertype} Order?`;\r\n  feOrderType.value = ordertype;\r\n  if (settingsStore.confirmDialog === true) {\r\n    removeTradeVisible.value = true;\r\n  } else {\r\n    forceExitExecuter();\r\n  }\r\n}\r\n\r\nfunction forceExitExecuter() {\r\n  if (confirmExitValue.value === ModalReasons.removeTrade) {\r\n    const payload: MultiDeletePayload = {\r\n      tradeid: String(feTrade.value.trade_id),\r\n      botId: feTrade.value.botId,\r\n    };\r\n    botStore.deleteTradeMulti(payload).catch((error) => console.log(error.response));\r\n  }\r\n  if (confirmExitValue.value === ModalReasons.forceExit) {\r\n    const payload: MultiForcesellPayload = {\r\n      tradeid: String(feTrade.value.trade_id),\r\n      botId: feTrade.value.botId,\r\n    };\r\n    if (feOrderType.value) {\r\n      payload.ordertype = feOrderType.value;\r\n    }\r\n    botStore\r\n      .forceSellMulti(payload)\r\n      .then((xxx) => console.log(xxx))\r\n      .catch((error) => console.log(error.response));\r\n  }\r\n  if (confirmExitValue.value === ModalReasons.cancelOpenOrder) {\r\n    const payload: MultiDeletePayload = {\r\n      tradeid: String(feTrade.value.trade_id),\r\n      botId: feTrade.value.botId,\r\n    };\r\n    botStore.cancelOpenOrderMulti(payload);\r\n  }\r\n\r\n  feOrderType.value = undefined;\r\n  removeTradeVisible.value = false;\r\n}\r\n\r\nfunction removeTradeHandler(item: Trade) {\r\n  confirmExitText.value = `Really delete trade ${item.trade_id} (Pair ${item.pair})?`;\r\n  confirmExitValue.value = ModalReasons.removeTrade;\r\n  feTrade.value = item;\r\n  removeTradeVisible.value = true;\r\n}\r\n\r\nfunction forceExitPartialHandler(item: Trade) {\r\n  feTrade.value = item;\r\n  forceExitVisible.value = true;\r\n}\r\n\r\nfunction cancelOpenOrderHandler(item: Trade) {\r\n  confirmExitText.value = `Cancel open order for trade ${item.trade_id} (Pair ${item.pair})?`;\r\n  feTrade.value = item;\r\n  confirmExitValue.value = ModalReasons.cancelOpenOrder;\r\n  removeTradeVisible.value = true;\r\n}\r\n\r\nfunction reloadTradeHandler(item: Trade) {\r\n  botStore.reloadTradeMulti({ tradeid: String(item.trade_id), botId: item.botId });\r\n}\r\n\r\nfunction handleContextMenuEvent(item, index, event) {\r\n  // stop browser context menu from appearing\r\n  if (!props.activeTrades) {\r\n    return;\r\n  }\r\n  event.preventDefault();\r\n  // log the selected item to the console\r\n  console.log(item);\r\n}\r\n\r\nconst onRowClicked = (item) => {\r\n  if (props.multiBotView && botStore.selectedBot !== item.botId) {\r\n    // Multibotview - on click switch to the bot trade view\r\n    botStore.selectBot(item.botId);\r\n  }\r\n  if (item && item.trade_id !== botStore.activeBot.detailTradeId) {\r\n    botStore.activeBot.setDetailTrade(item);\r\n    if (props.multiBotView) {\r\n      router.push({ name: 'Freqtrade Trading' });\r\n    }\r\n  } else {\r\n    botStore.activeBot.setDetailTrade(null);\r\n  }\r\n};\r\n\r\nconst onRowSelected = () => {\r\n  if (botStore.activeBot.detailTradeId) {\r\n    const itemIndex = props.trades.findIndex(\r\n      (v) => v.trade_id === botStore.activeBot.detailTradeId,\r\n    );\r\n    if (itemIndex >= 0) {\r\n      tradesTable.value?.selectRow(itemIndex);\r\n    } else {\r\n      console.log(`Unsetting item for tradeid ${selectedItemIndex.value}`);\r\n      selectedItemIndex.value = undefined;\r\n    }\r\n  }\r\n};\r\n\r\nwatch(\r\n  () => botStore.activeBot.detailTradeId,\r\n  (val) => {\r\n    const index = props.trades.findIndex((v) => v.trade_id === val);\r\n    // Unselect when another tradeTable is selected!\r\n    if (index < 0) {\r\n      tradesTable.value?.clearSelected();\r\n    }\r\n  },\r\n);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.card-body {\r\n  padding: 0 0.2em;\r\n}\r\n.table-sm {\r\n  font-size: $fontsize-small;\r\n}\r\n.btn-xs {\r\n  padding: 0.1rem 0.25rem;\r\n  font-size: 0.75rem;\r\n}\r\n</style>\r\n"],"names":["props","__props","emit","__emit","botStore","useBotStore","form","ref","amount","ordertype","checkFormValidity","_a","model","computed","value","handleSubmit","payload","resetForm","_b","_d","_c","handleEntry","popoverOpen","forceExitHandler","item","forceExitPartialHandler","cancelOpenOrderHandler","handleReloadTrade","router","useRouter","settingsStore","useSettingsStore","currentPage","selectedItemIndex","filterText","feTrade","perPage","tradesTable","forceExitVisible","removeTradeVisible","confirmExitText","confirmExitValue","openFields","closedFields","formatPriceWithDecimals","price","formatPrice","rows","tableFields","onMounted","key","typedItem","formatPercent","feOrderType","forceExitExecuter","error","xxx","removeTradeHandler","reloadTradeHandler","handleContextMenuEvent","index","event","onRowClicked","onRowSelected","itemIndex","v","watch","val"],"mappings":"mjBA8DA,MAAMA,EAAQC,EAORC,EAAOC,EACPC,EAAWC,IAEXC,EAAOC,IACPC,EAASD,EAAwB,MAAS,EAC1CE,EAAYF,EAAI,OAAO,EAEvBG,EAAoB,IAAM,OAGvB,OAFOC,EAAAL,EAAK,QAAL,YAAAK,EAAY,eAEnB,EAGHC,EAAQC,EAAS,CACrB,KAAM,CACJ,OAAOb,EAAM,UACf,EACA,IAAIc,EAAgB,CAClBZ,EAAK,oBAAqBY,CAAK,CACjC,CAAA,CACD,EAED,SAASC,GAAe,CAElB,GAAA,CAACL,IACH,OAGF,MAAMM,EAA4B,CAAE,QAAS,OAAOhB,EAAM,MAAM,QAAQ,GAEpES,EAAU,QACZO,EAAQ,UAAYP,EAAU,OAE5BD,EAAO,QACTQ,EAAQ,OAASR,EAAO,OAEjBJ,EAAA,UAAU,UAAUY,CAAO,EACpCJ,EAAM,MAAQ,EAChB,CAEA,SAASK,GAAY,aACZT,EAAA,MAAQR,EAAM,MAAM,OACjBS,EAAA,QACRS,GAAAP,EAAAP,EAAS,UAAU,WAAnB,YAAAO,EAA6B,cAA7B,YAAAO,EAA0C,eAC1CC,GAAAC,EAAAhB,EAAS,UAAU,WAAnB,YAAAgB,EAA6B,cAA7B,YAAAD,EAA0C,OAC1C,OACJ,CAEA,SAASE,GAAc,CAERN,GACf,wrKC9GA,MAAMb,EAAOC,EAOPmB,EAAcf,EAAI,EAAK,EAEpB,SAAAgB,EAAiBC,EAAaf,EAAgC,OAAW,CAChFa,EAAY,MAAQ,GACfpB,EAAA,YAAasB,EAAMf,CAAS,CACnC,CACA,SAASgB,EAAwBD,EAAa,CAC5CF,EAAY,MAAQ,GACpBpB,EAAK,mBAAoBsB,CAAI,CAC/B,CACA,SAASE,EAAuBF,EAAa,CAC3CF,EAAY,MAAQ,GACpBpB,EAAK,kBAAmBsB,CAAI,CAC9B,CACA,SAASG,EAAkBH,EAAa,CACtCF,EAAY,MAAQ,GACpBpB,EAAK,cAAesB,CAAI,CAC1B,wrCCoEA,MAAMxB,EAAQC,EASRG,EAAWC,IACXuB,EAASC,KACTC,EAAgBC,KAChBC,EAAczB,EAAI,CAAC,EACnB0B,EAAoB1B,IACpB2B,EAAa3B,EAAI,EAAE,EACnB4B,EAAU5B,EAAW,CAAA,CAAW,EAChC6B,EAAUpC,EAAM,aAAe,IAAM,GACrCqC,EAAc9B,IACd+B,EAAmB/B,EAAI,EAAK,EAC5BgC,EAAqBhC,EAAI,EAAK,EAC9BiC,EAAkBjC,EAAI,EAAE,EACxBkC,EAAmBlC,EAAyB,IAAI,EAEhDmC,EAA2B,CAAC,CAAE,IAAK,SAAW,CAAA,EAC9CC,EAA6B,CACjC,CAAE,IAAK,kBAAmB,MAAO,YAAa,EAC9C,CAAE,IAAK,cAAe,MAAO,cAAe,CAAA,EAE9C,SAASC,EAAwBC,EAAO,CACtC,OAAOC,EAAYD,EAAOzC,EAAS,UAAU,qBAAqB,CACpE,CACM,MAAA2C,EAAOlC,EAAS,IACbb,EAAM,OAAO,MACrB,EAIKgD,EAAczC,EAAW,CAAA,CAAE,EAEjC0C,GAAU,IAAM,CACdD,EAAY,MAAQ,CAClB,CAAE,IAAK,WAAY,MAAO,IAAK,EAC/B,CAAE,IAAK,OAAQ,MAAO,MAAO,EAC7B,CAAE,IAAK,SAAU,MAAO,QAAS,EACjC,CACE,IAAK,eACL,MAAO,cACT,EACA,CACE,IAAK,YACL,MAAO,YACP,UAAYlC,GAAmBgC,EAAYhC,CAAe,CAC5D,EACA,CACE,IAAKd,EAAM,aAAe,eAAiB,aAC3C,MAAOA,EAAM,aAAe,eAAiB,aAC7C,UAAYc,GAAmBgC,EAAYhC,CAAe,CAC5D,EACA,CACE,IAAK,SACL,MAAOd,EAAM,aAAe,mBAAqB,WACjD,UAAW,CAACc,EAAgBoC,EAAc1B,IAAmB,CAC3D,GAAI,CAACA,EACI,MAAA,GAET,MAAM2B,EAAY3B,EAEX,MAAA,GADS4B,GAAcD,EAAU,aAAc,CAAC,CACtC,IAAI,IAAIP,EAAwBO,EAAU,UAAU,CAAC,GAAG,EAC3E,CACF,EACA,CAAE,IAAK,iBAAkB,MAAO,WAAY,EAC5C,GAAInD,EAAM,aAAe0C,EAAaC,CAAA,EAEpC3C,EAAM,cACRgD,EAAY,MAAM,QAAQ,CAAE,IAAK,UAAW,MAAO,MAAO,CAC5D,CACD,EAEK,MAAAK,EAAc9C,EAAwB,MAAS,EAC5C,SAAAgB,EAAiBC,EAAaf,EAAgC,OAAW,CAChF0B,EAAQ,MAAQX,EAChBiB,EAAiB,MAAQ,EACTD,EAAA,MAAQ,qBAAqBhB,EAAK,QAAQ,UAAUA,EAAK,IAAI,WAAWf,CAAS,UACjG4C,EAAY,MAAQ5C,EAChBqB,EAAc,gBAAkB,GAClCS,EAAmB,MAAQ,GAETe,GAEtB,CAEA,SAASA,GAAoB,CACvB,GAAAb,EAAiB,QAAU,EAA0B,CACvD,MAAMzB,EAA8B,CAClC,QAAS,OAAOmB,EAAQ,MAAM,QAAQ,EACtC,MAAOA,EAAQ,MAAM,KAAA,EAEd/B,EAAA,iBAAiBY,CAAO,EAAE,MAAOuC,GAAU,QAAQ,IAAIA,EAAM,QAAQ,CAAC,CACjF,CACI,GAAAd,EAAiB,QAAU,EAAwB,CACrD,MAAMzB,EAAiC,CACrC,QAAS,OAAOmB,EAAQ,MAAM,QAAQ,EACtC,MAAOA,EAAQ,MAAM,KAAA,EAEnBkB,EAAY,QACdrC,EAAQ,UAAYqC,EAAY,OAElCjD,EACG,eAAeY,CAAO,EACtB,KAAMwC,GAAQ,QAAQ,IAAIA,CAAG,CAAC,EAC9B,MAAOD,GAAU,QAAQ,IAAIA,EAAM,QAAQ,CAAC,CACjD,CACI,GAAAd,EAAiB,QAAU,EAA8B,CAC3D,MAAMzB,EAA8B,CAClC,QAAS,OAAOmB,EAAQ,MAAM,QAAQ,EACtC,MAAOA,EAAQ,MAAM,KAAA,EAEvB/B,EAAS,qBAAqBY,CAAO,CACvC,CAEAqC,EAAY,MAAQ,OACpBd,EAAmB,MAAQ,EAC7B,CAEA,SAASkB,EAAmBjC,EAAa,CACvCgB,EAAgB,MAAQ,uBAAuBhB,EAAK,QAAQ,UAAUA,EAAK,IAAI,KAC/EiB,EAAiB,MAAQ,EACzBN,EAAQ,MAAQX,EAChBe,EAAmB,MAAQ,EAC7B,CAEA,SAASd,EAAwBD,EAAa,CAC5CW,EAAQ,MAAQX,EAChBc,EAAiB,MAAQ,EAC3B,CAEA,SAASZ,GAAuBF,EAAa,CAC3CgB,EAAgB,MAAQ,+BAA+BhB,EAAK,QAAQ,UAAUA,EAAK,IAAI,KACvFW,EAAQ,MAAQX,EAChBiB,EAAiB,MAAQ,EACzBF,EAAmB,MAAQ,EAC7B,CAEA,SAASmB,GAAmBlC,EAAa,CAC9BpB,EAAA,iBAAiB,CAAE,QAAS,OAAOoB,EAAK,QAAQ,EAAG,MAAOA,EAAK,KAAO,CAAA,CACjF,CAES,SAAAmC,GAAuBnC,EAAMoC,EAAOC,EAAO,CAE7C7D,EAAM,eAGX6D,EAAM,eAAe,EAErB,QAAQ,IAAIrC,CAAI,EAClB,CAEM,MAAAsC,GAAgBtC,GAAS,CACzBxB,EAAM,cAAgBI,EAAS,cAAgBoB,EAAK,OAE7CpB,EAAA,UAAUoB,EAAK,KAAK,EAE3BA,GAAQA,EAAK,WAAapB,EAAS,UAAU,eACtCA,EAAA,UAAU,eAAeoB,CAAI,EAClCxB,EAAM,cACR4B,EAAO,KAAK,CAAE,KAAM,mBAAqB,CAAA,GAGlCxB,EAAA,UAAU,eAAe,IAAI,CACxC,EAGI2D,GAAgB,IAAM,OACtB,GAAA3D,EAAS,UAAU,cAAe,CAC9B,MAAA4D,EAAYhE,EAAM,OAAO,UAC5BiE,GAAMA,EAAE,WAAa7D,EAAS,UAAU,aAAA,EAEvC4D,GAAa,GACHrD,EAAA0B,EAAA,QAAA,MAAA1B,EAAO,UAAUqD,IAE7B,QAAQ,IAAI,8BAA8B/B,EAAkB,KAAK,EAAE,EACnEA,EAAkB,MAAQ,OAE9B,CAAA,EAGF,OAAAiC,GACE,IAAM9D,EAAS,UAAU,cACxB+D,GAAQ,OACOnE,EAAM,OAAO,UAAWiE,GAAMA,EAAE,WAAaE,CAAG,EAElD,KACVxD,EAAA0B,EAAY,QAAZ,MAAA1B,EAAmB,gBAEvB,CAAA"}