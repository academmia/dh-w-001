{"version":3,"file":"EditValue.vue_vue_type_script_setup_true_lang-kXZMK3u9.js","sources":["../../src/components/general/EditValue.vue"],"sourcesContent":["<template>\r\n  <form class=\"d-flex flex-row\" @submit.prevent=\"saveNewName\">\r\n    <div class=\"flex-grow-1\">\r\n      <slot v-if=\"mode === EditState.None\"> </slot>\r\n      <b-form-input v-else v-model=\"localName\" size=\"sm\"> </b-form-input>\r\n    </div>\r\n    <div\r\n      class=\"flex-grow-2 mt-auto d-flex gap-1 ms-1\"\r\n      :class=\"alignVertical ? 'flex-column' : 'flex-row'\"\r\n    >\r\n      <template v-if=\"allowEdit && mode === EditState.None\">\r\n        <b-button\r\n          size=\"sm\"\r\n          variant=\"secondary\"\r\n          :title=\"`Edit this ${editableName}.`\"\r\n          @click=\"mode = EditState.Editing\"\r\n        >\r\n          <i-mdi-pencil />\r\n        </b-button>\r\n        <b-button\r\n          v-if=\"allowDuplicate\"\r\n          size=\"sm\"\r\n          variant=\"secondary\"\r\n          :title=\"`Duplicate ${editableName}.`\"\r\n          @click=\"duplicate\"\r\n        >\r\n          <i-mdi-content-copy />\r\n        </b-button>\r\n        <b-button\r\n          size=\"sm\"\r\n          variant=\"secondary\"\r\n          :title=\"`Delete this ${editableName}.`\"\r\n          @click=\"$emit('delete', modelValue)\"\r\n        >\r\n          <i-mdi-delete />\r\n        </b-button>\r\n      </template>\r\n      <b-button\r\n        v-if=\"allowAdd && mode === EditState.None\"\r\n        size=\"sm\"\r\n        :title=\"`Add new ${editableName}.`\"\r\n        variant=\"primary\"\r\n        @click=\"addNewClick\"\r\n        ><i-mdi-plus-box-outline />\r\n      </b-button>\r\n      <template v-if=\"mode !== EditState.None\">\r\n        <b-button\r\n          size=\"sm\"\r\n          :title=\"`Add new ${editableName}`\"\r\n          variant=\"primary\"\r\n          @click=\"saveNewName\"\r\n        >\r\n          <i-mdi-check />\r\n        </b-button>\r\n        <b-button size=\"sm\" title=\"Abort\" variant=\"secondary\" @click=\"abort\">\r\n          <i-mdi-close />\r\n        </b-button>\r\n      </template>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  allowEdit: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  allowAdd: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  allowDuplicate: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  editableName: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  alignVertical: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  delete: [value: string];\r\n  new: [value: string];\r\n  duplicate: [oldName: string, newName: string];\r\n  rename: [oldName: string, newName: string];\r\n}>();\r\n\r\nenum EditState {\r\n  None,\r\n  Editing,\r\n  Adding,\r\n  Duplicating,\r\n}\r\n\r\nconst localName = ref<string>('');\r\nconst mode = ref<EditState>(EditState.None);\r\nonMounted(() => {\r\n  localName.value = props.modelValue;\r\n});\r\n\r\nfunction abort() {\r\n  mode.value = EditState.None;\r\n  localName.value = props.modelValue;\r\n}\r\n\r\nfunction duplicate() {\r\n  localName.value = localName.value + ' (copy)';\r\n  mode.value = EditState.Duplicating;\r\n}\r\n\r\nfunction addNewClick() {\r\n  localName.value = '';\r\n  mode.value = EditState.Adding;\r\n}\r\n\r\nwatch(\r\n  () => props.modelValue,\r\n  () => {\r\n    localName.value = props.modelValue;\r\n  },\r\n);\r\n\r\nfunction saveNewName() {\r\n  if (mode.value === EditState.Adding) {\r\n    emit('new', localName.value);\r\n  } else if (mode.value === EditState.Duplicating) {\r\n    emit('duplicate', props.modelValue, localName.value);\r\n  } else {\r\n    // Editing\r\n    emit('rename', props.modelValue, localName.value);\r\n  }\r\n  mode.value = EditState.None;\r\n}\r\n</script>\r\n"],"names":["props","__props","emit","__emit","localName","ref","mode","onMounted","abort","duplicate","addNewClick","watch","saveNewName"],"mappings":"y4BA+DA,MAAMA,EAAQC,EA2BRC,EAAOC,EAcPC,EAAYC,EAAY,EAAE,EAC1BC,EAAOD,EAAe,GAC5BE,EAAU,IAAM,CACdH,EAAU,MAAQJ,EAAM,UAAA,CACzB,EAED,SAASQ,GAAQ,CACfF,EAAK,MAAQ,EACbF,EAAU,MAAQJ,EAAM,UAC1B,CAEA,SAASS,GAAY,CACTL,EAAA,MAAQA,EAAU,MAAQ,UACpCE,EAAK,MAAQ,CACf,CAEA,SAASI,GAAc,CACrBN,EAAU,MAAQ,GAClBE,EAAK,MAAQ,CACf,CAEAK,EACE,IAAMX,EAAM,WACZ,IAAM,CACJI,EAAU,MAAQJ,EAAM,UAC1B,CAAA,EAGF,SAASY,GAAc,CACjBN,EAAK,QAAU,EACZJ,EAAA,MAAOE,EAAU,KAAK,EAClBE,EAAK,QAAU,EACxBJ,EAAK,YAAaF,EAAM,WAAYI,EAAU,KAAK,EAGnDF,EAAK,SAAUF,EAAM,WAAYI,EAAU,KAAK,EAElDE,EAAK,MAAQ,CACf"}