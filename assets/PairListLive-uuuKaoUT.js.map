{"version":3,"file":"PairListLive-uuuKaoUT.js","sources":["../../src/components/ftbot/PairListLive.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <h3>Whitelist Methods</h3>\r\n\r\n      <div v-if=\"botStore.activeBot.pairlistMethods.length\" class=\"list wide\">\r\n        <div\r\n          v-for=\"(method, key) in botStore.activeBot.pairlistMethods\"\r\n          :key=\"key\"\r\n          class=\"pair white align-middle border border-secondary\"\r\n        >\r\n          {{ method }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Show Whitelist -->\r\n    <h3 :title=\"`${botStore.activeBot.whitelist.length} pairs`\">Whitelist</h3>\r\n    <div v-if=\"botStore.activeBot.whitelist.length\" class=\"list\">\r\n      <div\r\n        v-for=\"(pair, key) in botStore.activeBot.whitelist\"\r\n        :key=\"key\"\r\n        class=\"pair white align-middle border border-secondary text-small\"\r\n      >\r\n        {{ pair }}\r\n      </div>\r\n    </div>\r\n    <p v-else>List Unavailable. Please Login and make sure server is running.</p>\r\n    <hr />\r\n\r\n    <!-- Blacklsit -->\r\n    <div>\r\n      <label\r\n        class=\"me-auto h3\"\r\n        title=\"Blacklist - Select (followed by a click on '-') to remove pairs\"\r\n        >Blacklist</label\r\n      >\r\n      <div class=\"float-end d-flex d-flex-columns pe-1\">\r\n        <b-button\r\n          id=\"blacklist-add-btn\"\r\n          class=\"me-1\"\r\n          :class=\"botStore.activeBot.botApiVersion >= 1.12 ? 'col-6' : ''\"\r\n          size=\"sm\"\r\n          ><i-mdi-plus-box-outline />\r\n        </b-button>\r\n        <b-button\r\n          v-if=\"botStore.activeBot.botApiVersion >= 1.12\"\r\n          size=\"sm\"\r\n          class=\"col-6\"\r\n          title=\"Select pairs to delete pairs from your blacklist.\"\r\n          :disabled=\"blacklistSelect.length === 0\"\r\n          @click=\"deletePairs\"\r\n        >\r\n          <i-mdi-delete />\r\n        </b-button>\r\n      </div>\r\n      <b-popover\r\n        title=\"Add to blacklist\"\r\n        target=\"blacklist-add-btn\"\r\n        triggers=\"click\"\r\n        container=\"body\"\r\n        :show=\"blackListShow\"\r\n      >\r\n        <form ref=\"form\" @submit.prevent>\r\n          <div>\r\n            <b-form-group label-cols=\"2\" label=\"Pair\" label-for=\"pair-input\">\r\n              <b-form-input\r\n                id=\"pair-input\"\r\n                v-model=\"newblacklistpair\"\r\n                required\r\n                autofocus\r\n              ></b-form-input>\r\n            </b-form-group>\r\n            <b-button\r\n              id=\"blacklist-submit\"\r\n              class=\"float-end mb-2\"\r\n              size=\"sm\"\r\n              type=\"submit\"\r\n              @click=\"addBlacklistPair\"\r\n            >\r\n              Add</b-button\r\n            >\r\n          </div>\r\n        </form>\r\n      </b-popover>\r\n    </div>\r\n    <div v-if=\"botStore.activeBot.blacklist.length\" class=\"list\">\r\n      <div\r\n        v-for=\"(pair, key) in botStore.activeBot.blacklist\"\r\n        :key=\"key\"\r\n        class=\"pair black border border-secondary\"\r\n        :class=\"blacklistSelect.indexOf(key) > -1 ? 'active' : ''\"\r\n        @click=\"blacklistSelectClick(key)\"\r\n      >\r\n        <span class=\"check\"><i-mdi-check-circle /></span>{{ pair }}\r\n      </div>\r\n    </div>\r\n    <p v-else>BlackList Unavailable. Please Login and make sure server is running.</p>\r\n    <!-- Pagination -->\r\n    <!-- TODO Add pagination support -->\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { useBotStore } from '@/stores/ftbotwrapper';\r\n\r\nconst newblacklistpair = ref('');\r\nconst blackListShow = ref(false);\r\nconst blacklistSelect = ref<number[]>([]);\r\nconst botStore = useBotStore();\r\n\r\nconst initBlacklist = () => {\r\n  if (botStore.activeBot.whitelist.length === 0) {\r\n    botStore.activeBot.getWhitelist();\r\n  }\r\n  if (botStore.activeBot.blacklist.length === 0) {\r\n    botStore.activeBot.getBlacklist();\r\n  }\r\n};\r\n\r\nconst addBlacklistPair = () => {\r\n  if (newblacklistpair.value) {\r\n    blackListShow.value = false;\r\n\r\n    botStore.activeBot.addBlacklist({ blacklist: [newblacklistpair.value] });\r\n    newblacklistpair.value = '';\r\n  }\r\n};\r\n\r\nconst blacklistSelectClick = (key) => {\r\n  const index = blacklistSelect.value.indexOf(key);\r\n  if (index > -1) {\r\n    blacklistSelect.value.splice(index, 1);\r\n  } else {\r\n    blacklistSelect.value.push(key);\r\n  }\r\n};\r\n\r\nconst deletePairs = () => {\r\n  if (blacklistSelect.value.length === 0) {\r\n    console.log('nothing to delete');\r\n    return;\r\n  }\r\n  // const pairlist = blacklistSelect.value;\r\n  const pairlist = botStore.activeBot.blacklist.filter(\r\n    (value, index) => blacklistSelect.value.indexOf(index) > -1,\r\n  );\r\n  console.log('Deleting pairs: ', pairlist);\r\n  botStore.activeBot.deleteBlacklist(pairlist);\r\n  blacklistSelect.value = [];\r\n};\r\nonMounted(() => {\r\n  initBlacklist();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.check {\r\n  // Hidden checkbox on blacklist selection\r\n  // background: white;\r\n  color: #41b883;\r\n  opacity: 0;\r\n  // border-radius: 50%;\r\n  z-index: 5;\r\n  width: 1.3em;\r\n  height: 1.3em;\r\n  top: -0.3em;\r\n  left: -0.3em;\r\n  position: absolute;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.pair.active .check {\r\n  opacity: 1;\r\n}\r\n\r\n.list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));\r\n  grid-gap: 0.5rem;\r\n  padding-bottom: 1rem;\r\n}\r\n.wide {\r\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\r\n}\r\n\r\n.pair {\r\n  background: #41b883;\r\n  padding: 0.5rem;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.white {\r\n  background: white;\r\n  color: black;\r\n}\r\n\r\n.black {\r\n  background: black;\r\n  color: white;\r\n}\r\n</style>\r\n"],"names":["newblacklistpair","ref","blackListShow","blacklistSelect","botStore","useBotStore","initBlacklist","addBlacklistPair","blacklistSelectClick","key","index","deletePairs","pairlist","value","onMounted"],"mappings":"miCAyGM,MAAAA,EAAmBC,EAAI,EAAE,EACzBC,EAAgBD,EAAI,EAAK,EACzBE,EAAkBF,EAAc,CAAA,CAAE,EAClCG,EAAWC,IAEXC,EAAgB,IAAM,CACtBF,EAAS,UAAU,UAAU,SAAW,GAC1CA,EAAS,UAAU,eAEjBA,EAAS,UAAU,UAAU,SAAW,GAC1CA,EAAS,UAAU,cACrB,EAGIG,EAAmB,IAAM,CACzBP,EAAiB,QACnBE,EAAc,MAAQ,GAEbE,EAAA,UAAU,aAAa,CAAE,UAAW,CAACJ,EAAiB,KAAK,EAAG,EACvEA,EAAiB,MAAQ,GAC3B,EAGIQ,EAAwBC,GAAQ,CACpC,MAAMC,EAAQP,EAAgB,MAAM,QAAQM,CAAG,EAC3CC,EAAQ,GACMP,EAAA,MAAM,OAAOO,EAAO,CAAC,EAErBP,EAAA,MAAM,KAAKM,CAAG,CAChC,EAGIE,EAAc,IAAM,CACpB,GAAAR,EAAgB,MAAM,SAAW,EAAG,CACtC,QAAQ,IAAI,mBAAmB,EAC/B,MACF,CAEM,MAAAS,EAAWR,EAAS,UAAU,UAAU,OAC5C,CAACS,EAAOH,IAAUP,EAAgB,MAAM,QAAQO,CAAK,EAAI,EAAA,EAEnD,QAAA,IAAI,mBAAoBE,CAAQ,EAC/BR,EAAA,UAAU,gBAAgBQ,CAAQ,EAC3CT,EAAgB,MAAQ,EAAC,EAE3B,OAAAW,EAAU,IAAM,CACAR,GAAA,CACf"}